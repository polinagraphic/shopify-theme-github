{% style %}
.four-image-section {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  gap: {{ section.settings.gap }}px;
  margin-top: {{ section.settings.m_top }}px;
  margin-bottom: {{ section.settings.m_bottom }}px;
}

.four-image-section .image-container {
  border-radius: 100px;
  width: {{ section.settings.image_size }}px;
}

@media (max-width: 768px) {
  .four-image-section {
    display: block; /* hide flex layout for mobile */
  }

  .swiper {
    width: 100%;
  }

  .swiper-slide {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .swiper-slide .image-container {
    width: 120px; /* adjust to fit 4 per view if needed */
    flex: 0 0 auto;
  }

  .swiper-pagination-bullets {
    bottom: -10px;
  }
}
{% endstyle %}

<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

<!-- Desktop Layout -->
<div class="four-image-section desktop-only">
  {% for i in (1..6) %}
    {% assign img = section.settings["image_" | append: i] %}
    {% assign bg = section.settings["bg_color_" | append: i] %}
    {% if img %}
      <div class="image-container" style="background-color: {{ bg }};">
        <img src="{{ img | img_url: 'medium' }}" alt="{{ img.alt }}">
      </div>
    {% endif %}
  {% endfor %}
</div>

<!-- Mobile Swiper -->
<div class="swiper mobile-only">
  <div class="swiper-wrapper">
    {% for i in (1..6) %}
      {% assign img = section.settings["image_" | append: i] %}
      {% assign bg = section.settings["bg_color_" | append: i] %}
      {% if img %}
        <div class="swiper-slide">
          <div class="image-container" style="background-color: {{ bg }};">
            <img src="{{ img | img_url: 'medium' }}" alt="{{ img.alt }}">
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <!-- Optional Pagination + Navigation -->
  <div class="swiper-pagination"></div>
</div>

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // hide desktop version on mobile and vice versa
  function handleVisibility() {
    const isMobile = window.innerWidth <= 768;
    document.querySelector('.desktop-only').style.display = isMobile ? 'none' : 'flex';
    document.querySelector('.mobile-only').style.display = isMobile ? 'block' : 'none';
  }

  handleVisibility();
  window.addEventListener('resize', handleVisibility);

  // Init Swiper for mobile
  var swiper = new Swiper('.swiper', {
    slidesPerView: 4,
    spaceBetween: {{ section.settings.gap }},
    loop: true,
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    breakpoints: {
      0: {
        slidesPerView: 2.5,
      },
      480: {
        slidesPerView: 3,
      },
      640: {
        slidesPerView: 4,
      },
    },
  });
});
</script>

{% schema %}
{
  "name": "4 Images Section",
  "settings": [
    {
      "type": "image_picker",
      "id": "image_1",
      "label": "Imnage 1"
    },
    {
        "type": "color",
        "id": "bg_color",
        "label": "Background Color"
    },
    {
        "type": "image_picker",
        "id": "image_2",
        "label": "Image 2"
        },
            {
        "type": "color",
        "id": "bg_color_2",
        "label": "Background Color"
    },
        {
        "type": "image_picker",
        "id": "image_3",
        "label": "Image 3"
        },
            {
        "type": "color",
        "id": "bg_color_3",
        "label": "Background Color"
    },
        {
        "type": "image_picker",
        "id": "image_4",
        "label": "Image 4"
    },
        {
        "type": "color",
        "id": "bg_color_4",
        "label": "Background Color"
    },
          {
        "type": "image_picker",
        "id": "image_5",
        "label": "Image 5"
    },
        {
        "type": "color",
        "id": "bg_color_5",
        "label": "Background Color"
    },
          {
        "type": "image_picker",
        "id": "image_6",
        "label": "Image 6"
    },
        {
        "type": "color",
        "id": "bg_color_6",
        "label": "Background Color"
    },
     {
        "type": "range",
        "id": "image_size",
        "label": "Images Size (px)",
        "min": 10,
        "max": 500,
        "step": 10,
        "default": 130
    },
    {
        "type": "range",
        "id": "gap",
        "label": "Gap between images (px)",
        "min": 0,
        "max": 100,
        "step": 5,
        "default": 20
    },
     {
        "type": "range",
        "id": "m_top",
        "label": "section Top Margin (px)",
        "min": 0,
        "max": 100,
        "step": 2,
        "default": 20
    },
     {
        "type": "range",
        "id": "m_bottom",
        "label": "section Bottom Margin (px)",
        "min": 0,
        "max": 100,
        "step": 2,
        "default": 20
    }
],
"presets": [
    {
      "name": "4 Images Section"
    }
  ]
}
{% endschema %}
